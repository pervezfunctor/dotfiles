#! /usr/bin/env bash

{

source <(curl -sSL https://dub.sh/z3pTnAK)

main() {
    has_cmd git || err_exit "Install git before running this script"

    if is_linux && has_cmd python3; then
        atomic_python_install
    fi

    if is_mac; then
        brew_install
    else
        appman_install
    fi

    mise_install

    if is_linux; then
        mis tree-sitter just lazygit starship ripgrep gh xh
        mis bottom fzf fd eza zoxide bat tmux duf
        mise use -g cargo:git-delta
        ami sd nvim

        if has_cmd flatpak; then
            smd ~/.local/share/fonts
            jetbrains_nerd_font_install

            fpi app.devsuite.Ptyxis
            fpi org.wezfurlong.wezterm
            alias wezterm="flatpak run org.wezfurlong.wezterm"
        fi
    elif is_mac; then
        bis tree-sitter just lazygit starship gh xh git-delta sd luarocks
        bis fzf fd eza zoxide bat tmux duf
        bi bottom ripgrep neovim zsh-syntax-highlighting zsh-autosuggestions
        bi reattach-to-user-namespace

        bic wezterm font-jetbrains-mono-nerd-font
    fi
    gh extension install github/gh-copilot

    dotfile_install
    confile_install
}

is_linux || is_mac || err_exit "This script is only for Linux and Mac"

bootstrap "Seartipy shell setup"

}
