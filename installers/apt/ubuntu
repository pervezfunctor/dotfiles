
#! /usr/bin/env bash

{

if command -v apt-get > /dev/null; then
    sudo apt-get install -y curl
else
    echo "apt-get not found. Please install apt-get and try again."
    exit 1
fi

source <(curl -sSL https://dub.sh/z3pTnAK)

flatpak_apps_install() {
    flatpak install -y --user flathub org.telegram.desktop
    flatpak install -y --user flathub com.jetbrains.CLion
    flatpak install -y --user flathub com.google.Chrome
    flatpak install -y --user flathub org.deluge_torrent.deluge
    flatpak install -y --user flathub us.zoom.Zoom
    flatpak install -y --user flathub org.wezfurlong.wezterm
    flatpak install -y --user flathub io.github.shiftey.Desktop
}

apps_install() {
    apti chromium-browser emacs virt-manager
    flatpak_apps_install
}

snap_install() {
    has_cmd snap && return 0

    slog "Installing snap..."
    apti snapd
    slog "snap installation done!"
}

main() {
    dotfiles_install
    essential_install

    go_install
    flathub_install
    snap_install
    brew_install
    rust_install
    pnpm_install
    asdf_install

    fonts_install

    cpp_install
    python_install

    shell_install
    alacritty_install

    neovim_install
    vscode_install
    apps_install

    virt_install

    config_install

    set_zsh_as_default
}

is_apt || err_exit "This script works only on Ubuntu. Quitting."

bootstrap "Ubuntu desktop setup(desktop)"

}
