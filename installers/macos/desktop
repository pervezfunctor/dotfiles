#! /usr/bin/env bash

{

source <(curl -sSL https://dub.sh/z3pTnAK)

macos_settings_install() {
    defaults write -g NSWindowShouldDragOnGesture -bool true
}

macos_config_install() {
    stow -d $DOT_DIR/stow -t $HOME --dotfiles -R aerospace
    stow -d $DOT_DIR/stow -t $HOME --dotfiles -R amethyst
}

ui_install() {
    bi deluge
    bi visual-studio-code
    bic telegram
    bic zoom
    bic ghostty
    bic google-chrome
    bic microsoft-remote-desktop
    bic nikitabobko/tap/aerospace
}

main() {
    slog "Install xcode"
    xcode-select --install

    brew_install

    essential_install
    dotfiles_install

    cli_install
    fonts_install

    pnpm_install
    cpp_install
    python_uv_install
    # pyenv_mac_install
    # anaconda_install

    ui_install
    virt_install

    macos_config_install

    config_install
}

is_mac || err_exit "This script works only on macos. Quitting."

bootstrap "Macos setup"

}
