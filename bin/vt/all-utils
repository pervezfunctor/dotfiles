#!/usr/bin/env bash

all_usage() {
  local vt="$1"
  local type="$2"

  cat <<EOF
Usage: $(basename "$0") [OPTION]

"${vt}" {$type} for various Linux distributions.

Options:
  create    # Create all "${vt}" {$type} for various Linux distributions.(default if no option)
  exec      # Execute a command in all "${vt}" {$type} for various Linux distributions.
  delete    # Delete all "${vt}" {$type} for various Linux distributions.
  start     # Start all "${vt}" {$type} for various Linux distributions.
  stop      # Stop all "${vt}" {$type} for various Linux distributions.
  restart   # Restart all "${vt}" {$type} for various Linux distributions.
  --help    # Display this help message

Examples:
  $(basename "$0")           # Create {$type} for various Linux distributions.or attach if exists
  $(basename "$0") create    # Force create a new set of {$type} for various Linux distributions.}
  $(basename "$0") delete    # Delete all {$type} for various Linux distributions.}
  $(basename "$0") start     # Start all {$type} for various Linux distributions.
  $(basename "$0") stop      # Stop all {$type} for various Linux distributions.
  $(basename "$0") restart   # Restart all {$type} for various Linux distributions.}
EOF
}

all_parse_args() {
  if [[ $# -eq 0 ]]; then
    all_create "$@"
    exit 0
  fi

  if [[ "$1" == "--help" || "$1" == "help" || "$1" == "help" ]]; then
    usage
    exit 0
  fi

  local op="$1"
  shift

  if fn_exists "all_${op}"; then
    "all_${op}" "$@"
  else
    fail "Unknown option: $op"
    usage
    exit 1
  fi
}

# @TODO:
# all_op() {
#   local vt="$1"
#   local op="$2"
#   shift 2

#   slog "Performing operation '$op' on all ${vt}..."

#   for ct in "${ICT_DISTRO_LIST[@]}"; do
#     if ict_exists "${ct}-ict"; then
#       ict "$op" "${ct}-ict" "$@"
#     else
#       warn "Container ${ct}-ict does not exist, skipping..."
#     fi
#   done

#   success "Performed operation '$op' on all containers successfully!"
# }
