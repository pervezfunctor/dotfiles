#!/usr/bin/env bash

ILM_LOG_DIR="${XDG_STATE_HOME:-$HOME/.local/state}/ilm/logs"

# shellcheck disable=SC1091
source "$DOT_DIR/share/utils"

SEARCHES=(
  "denied"
  "fail"
  "warn"
  "error"
  "not"
  "unable"
  "denied"
  "fatal"
  "Unknown"
  "No match"
)

for search in "${SEARCHES[@]}"; do
  if grep -i "$search" <"${ILM_LOG_DIR}"/output.log; then
    press_enter
  fi
done

for search in "${SEARCHES[@]}"; do
  if grep -i "$search" <"${ILM_LOG_DIR}"/error.log; then
    press_enter
  fi
done
