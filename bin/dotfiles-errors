#!/usr/bin/env bash

ILM_LOG_DIR="${XDG_STATE_HOME:-$HOME/.local/state}/ilm/logs"

# shellcheck disable=SC1091
source "$DOT_DIR/share/utils"

SEARCHES=(
  "denied"
  "fail"
  "warn"
  "error"
  "not"
  "unable"
  "denied"
  "fatal"
  "Unknown"
  "No match"
)

LOG_FILES=(
  "$ILM_LOG_DIR"/.dotfiles-output.log
  "$ILM_LOG_DIR"/.dotfiles-error.log
  "$ILM_LOG_DIR"/slog.log
  "$ILM_LOG_DIR"/fail.log
  "$ILM_LOG_DIR"/warn.log
  "$ILM_LOG_DIR"/info.log
  "$ILM_LOG_DIR"/success.log
)

for search in "${SEARCHES[@]}"; do
    for log_file in "${LOG_FILES[@]}"; do
      if file_exists "$log_file"; then
        if grep -i "$search" <"$log_file"; then
        press_enter
      fi
    fi
done
done
